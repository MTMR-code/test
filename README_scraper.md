# 総務省報道資料スクレイピングツール

[総務省の報道資料一覧ページ](https://www.soumu.go.jp/menu_news/s-news/2501m.html)から報道資料を自動でスクレイピングしてCSVファイルに保存するツールです。

## 🚀 機能

- **一括スクレイピング**: 2009年1月から現在まで全ての月のデータを自動取得
- **単一月スクレイピング**: 指定した月のデータのみ取得
- **自動URL生成**: 年月に基づいてURLを自動生成
- **データ取得**: 発表日、内容、部局、リンクURL、対象期間の取得
- **CSV出力**: タイムスタンプ付きファイル名で自動保存
- **統計表示**: 部局別・年別・月別の集計表示
- **進捗表示**: リアルタイムでの処理状況表示

## 📋 必要なライブラリ

```bash
pip install -r requirements_scraper.txt
```

## 🛠️ 使用方法

### 1. メニュー形式での実行（推奨）

```bash
python run_batch_scraper.py
```

メニューから以下を選択できます：
- **1. 一括スクレイピング**: 2009年1月～現在まで全ての月
- **2. 単一月スクレイピング**: 2025年1月のみ
- **3. 終了**

### 2. 直接実行

```bash
# 一括スクレイピング（2009年1月～現在）
python soumu_scraper.py

# 単一月スクレイピング
python run_scraper.py
```

### 3. 期間指定での実行

```python
from soumu_scraper import scrape_all_months

# 2020年1月～2024年12月のみ
df = scrape_all_months(start_year=2020, end_year=2024)
```

## 📊 出力ファイル

### 一括スクレイピング
- ファイル名: `soumu_press_releases_all_YYYYMMDD_HHMMSS.csv`
- エンコーディング: UTF-8 with BOM
- 列: 発表日, 内容, 部局, リンクURL, 対象期間

### 単一月スクレイピング
- ファイル名: `soumu_press_releases_single_YYYYMMDD_HHMMSS.csv`
- エンコーディング: UTF-8 with BOM
- 列: 発表日, 内容, 部局, リンクURL

## 🔧 カスタマイズ

### 別の月のデータを取得する場合

`soumu_scraper.py`のURLを変更してください：

```python
# 例: 2024年12月のデータ
url = "https://www.soumu.go.jp/menu_news/s-news/2412m.html"
```

### 出力ファイル名の変更

`main()`関数内の`filename`変数を変更してください：

```python
filename = "custom_filename.csv"
```

## ⚠️ 注意事項

1. **利用規約の遵守**: 総務省の利用規約を遵守してください
2. **アクセス頻度**: 過度なアクセスは避けてください
3. **データの正確性**: スクレイピング結果は参考情報として使用してください

## 🐛 トラブルシューティング

### よくあるエラー

1. **ConnectionError**: ネットワーク接続を確認してください
2. **TimeoutError**: タイムアウト時間を延長してください
3. **EncodingError**: 文字エンコーディングを確認してください

### デバッグモード

詳細なログを表示するには：

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## 📈 出力例

### 一括スクレイピング実行例

```
=== 総務省報道資料一括スクレイピング ===
期間: 2009年1月 ～ 2025年1月
------------------------------------------------------------
対象URL数: 193件

[1/193] 処理中...
スクレイピング開始: 2009年1月 (https://www.soumu.go.jp/menu_news/s-news/0901m.html)
取得した報道資料数: 12件
✅ 成功: 12件取得

[2/193] 処理中...
スクレイピング開始: 2009年2月 (https://www.soumu.go.jp/menu_news/s-news/0902m.html)
取得した報道資料数: 8件
✅ 成功: 8件取得

...

=== スクレイピング結果 ===
成功: 180件
失敗: 13件
総取得件数: 2,456件

=== 詳細統計 ===
総取得件数: 2,456件

部局別集計:
  総合通信基盤局: 456件
  商務情報政策局: 234件
  行政管理局: 189件
  統計局: 156件
  通信政策局: 123件
  流通行政局: 98件
  官房: 87件

年別集計:
  2009年: 45件
  2010年: 67件
  2011年: 89件
  ...
  2024年: 234件
  2025年: 15件

✅ スクレイピング完了！
📁 保存ファイル: soumu_press_releases_all_20250101_120000.csv
📊 データ件数: 2,456件
📅 期間: 2009年1月 ～ 現在
```
